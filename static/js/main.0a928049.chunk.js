(this["webpackJsonpfifteen-minute-food-frontend"]=this["webpackJsonpfifteen-minute-food-frontend"]||[]).push([[0],{18:function(e){e.exports=JSON.parse('[{"name":"Catfish","price":12},{"name":"Steak and Potatoes","price":30},{"name":"Spagetti","price":15}]')},26:function(e,t,a){e.exports=a(38)},31:function(e,t,a){},32:function(e,t,a){},38:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(21),c=a.n(s),l=(a(31),a(12)),o=a(25),i=a(1),u=a(2),m=a(4),p=a(3),h=a(5),d=a(11),f=(a(32),function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={username:"",password:"",redirect:!1,token:""},a.handleChange=function(e){console.log(a.state);var t=e.target,n=t.name,r=t.value;a.setState(Object(l.a)({},n,r))},a.handleRegisterSubmit=function(e){e.preventDefault(),fetch("https://fifteenminute-api.herokuapp.com/users",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(a.state)}).then((function(e){return e.json()})).then(a.handleResponse)},a.handleResponse=function(e){e.user?(localStorage.token=e.token,localStorage.username=e.user.username,a.props.handleCurrentUser(localStorage.username),a.setState({username:a.state.username,password:a.state.password,token:e.token,redirect:!0})):alert(e.error)},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.state,t=e.username,a=e.password;return r.a.createElement("div",{className:"container"},r.a.createElement("form",{onSubmit:this.handleRegisterSubmit},r.a.createElement("h1",null,"Register"),r.a.createElement("label",{htmlFor:"username"},"Username:"),r.a.createElement("input",{type:"text",name:"username",value:t,onChange:this.handleChange}),r.a.createElement("label",{htmlFor:"password"},"Password:"),r.a.createElement("input",{type:"password",name:"password",value:a,onChange:this.handleChange}),r.a.createElement("input",{type:"submit",value:"Submit"})),this.state.redirect?r.a.createElement(d.a,{push:!0,to:"/profile"}):r.a.createElement("p",null))}}]),t}(n.Component)),E=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={username:"",password:"",redirect:!1,token:""},a.handleChange=function(e){console.log(a.state);var t=e.target,n=t.name,r=t.value;a.setState(Object(l.a)({},n,r))},a.handleLoginSubmit=function(e){e.preventDefault(),fetch("https://fifteenminute-api.herokuapp.com/login",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(a.state)}).then((function(e){return e.json()})).then(a.handleResponse)},a.handleResponse=function(e){e.user?(localStorage.token=e.token,localStorage.username=e.user.username,a.props.handleCurrentUser(localStorage.username),a.setState({username:a.state.username,password:a.state.password,token:e.token,redirect:!0})):alert(e.error)},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.state,t=e.username,a=e.password;return r.a.createElement("div",{className:"container"},r.a.createElement("form",{onSubmit:this.handleLoginSubmit},r.a.createElement("h1",null,"Login"),r.a.createElement("label",{htmlFor:"username"},"Username:"),r.a.createElement("input",{type:"text",name:"username",value:t,onChange:this.handleChange}),r.a.createElement("label",{htmlFor:"password"},"Password:"),r.a.createElement("input",{type:"password",name:"password",value:a,onChange:this.handleChange}),r.a.createElement("input",{type:"submit",value:"Submit"})),this.state.redirect?r.a.createElement(d.a,{push:!0,to:"/profile"}):r.a.createElement("p",null))}}]),t}(n.Component),b=a(7),v=function(){return r.a.createElement("div",{className:"title"},"Fifteen Minute Food",r.a.createElement("ul",{className:"nav"},r.a.createElement("li",null,r.a.createElement(b.b,{to:"/cart",className:"navLink"},"Cart")),r.a.createElement("li",null,r.a.createElement(b.b,{to:"/login",className:"navLink"},"Login")),r.a.createElement("li",null,r.a.createElement(b.b,{to:"/register",className:"navLink"},"Register")),r.a.createElement("li",null,r.a.createElement(b.b,{to:"/profile",className:"navLink"},"Profile")),r.a.createElement("li",null,r.a.createElement(b.b,{to:"/search",className:"navLink"},"Search"))))},g=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).onDeleteClick=function(){a.props.onDeleteItem(a.props.name)},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"cartItemContainer"},r.a.createElement("p",null,this.props.name,": ",this.props.price),r.a.createElement("button",{onClick:this.onDeleteClick},"Remove"))}}]),t}(n.Component),y=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={},a.findSubtotal=function(){return a.props.itemsInCart.reduce((function(e,t){return e+(t.price||0)}),0).toFixed(2)},a.findTotal=function(){return(1.08875*a.findSubtotal()).toFixed(2)},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return console.log(this.props.itemsInCart),r.a.createElement("div",{className:"container"},r.a.createElement("h1",null,"My Cart"),0!==this.props.itemsInCart.length?r.a.createElement("div",null,r.a.createElement("h2",null,this.props.selectRest.name),r.a.createElement("div",{className:"cart"},this.props.itemsInCart.map((function(t){return r.a.createElement(g,{id:t.id,name:t.name,price:t.price,onDeleteItem:e.props.onDeleteItem})}))),r.a.createElement("div",{className:"totals"},r.a.createElement("p",null,"Subtotal: $",this.findSubtotal()),r.a.createElement("p",null,"Tax: 8.875%"),r.a.createElement("p",null,"Total: $",this.findTotal())),r.a.createElement(b.b,{to:"/checkout"},"Checkout")):r.a.createElement("p",null,"Cart is empty."))}}]),t}(n.Component),j=a(24),O=a.n(j);function C(e){var t=e.total;return r.a.createElement("div",null,r.a.createElement(O.a,{token:function(a){var n={token:a.id},r={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({charge:n,price:100*t})};fetch("https://fifteenminute-api.herokuapp.com/charge_adapter",r).then((function(e){return e.json()})).then((function(){e.afterPayment()}))},stripeKey:"pk_test_IPcPeFrETWjmr9mFIYFwZlqn00nfwg4xZi"}))}var S=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={redirect:!1},a.findSubtotal=function(){return a.props.itemsInCart.reduce((function(e,t){return e+(t.price||0)}),0).toFixed(2)},a.findTotal=function(){return(1.08875*a.findSubtotal()).toFixed(2)},a.afterPayment=function(){var e={restaurant:{name:a.props.selectRest.name,location:a.props.selectRest.location,category:a.props.selectRest.category,phone_number:a.props.selectRest.phone_number,address:a.props.selectRest.address,image_url:a.props.selectRest.image_url},items:a.props.itemsInCart,user:localStorage.username};fetch("https://fifteenminute-api.herokuapp.com/sales",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){console.log(e),a.props.clearCart(),a.setState({redirect:!0})}))},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement("h1",null,"Checkout"),r.a.createElement("h2",null,this.props.selectRest.name),r.a.createElement("div",{className:"totals"},r.a.createElement("p",null,"Subtotal: $",this.findSubtotal()),r.a.createElement("p",null,"Tax: 8.875%"),r.a.createElement("p",null,"Total: $",this.findTotal())),r.a.createElement(C,{total:this.findTotal(),afterPayment:this.afterPayment}),this.state.redirect?r.a.createElement(d.a,{push:!0,to:"/confirmation"}):r.a.createElement("p",null))}}]),t}(n.Component),k=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).handleClick=function(){a.props.addItemToCart(a.props)},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"restaurant_name"},r.a.createElement("h6",{className:"food_name"},this.props.name),r.a.createElement("p",{className:"price"},"$",this.props.price),r.a.createElement("button",{onClick:this.handleClick},"Add to Cart"))}}]),t}(n.Component),N=function(e){function t(){return Object(i.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,this.props.menu.map((function(t){return r.a.createElement(k,{name:t.name,price:t.price,addItemToCart:e.props.addItemToCart})})))}}]),t}(n.Component),R=a(18),w=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={restObj:{id:null,image_url:"",name:"",categories:{title:""},price:"",location:{address1:""},rating:"",review_count:0,display_phone:"",transactions:"",isclosed:!1}},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("https://fifteenminute-api.herokuapp.com/yelp_api_adapter/info?business_id=".concat(this.props.selectRest.id)).then((function(e){return e.json()})).then((function(t){e.setState({restObj:t})}))}},{key:"render",value:function(){return console.log("menu",R),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"image"},r.a.createElement("img",{src:this.state.restObj.image_url,alt:this.state.restObj.name})),r.a.createElement("div",{className:"restaurant-name"},r.a.createElement("p",null,this.state.restObj.name)),r.a.createElement(N,{menu:R,addItemToCart:this.props.addItemToCart}))}}]),t}(n.Component),I=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={sales:[]},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("https://fifteenminute-api.herokuapp.com/userSales",{method:"PUT",headers:{"content-type":"application/json"},body:JSON.stringify({username:this.props.username})}).then((function(e){return e.json()})).then((function(t){return e.setState({sales:t})}))}},{key:"render",value:function(){return console.log(this.state.sales),r.a.createElement("div",{className:"container"},r.a.createElement("h1",null,"Hello, ",this.props.username,"!"),r.a.createElement("h3",null,"Past Orders: "),r.a.createElement("ul",null,this.state.sales.map((function(e){return r.a.createElement("li",null,e.restaurant.name,"-- "," ",e.nice_timestamp_for_grandma,r.a.createElement("ul",null,e.food_items.map((function(e){return r.a.createElement("li",{className:"past_order_list"},"Item: ",e.name)}))))}))))}}]),t}(r.a.Component),T=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).helpWithChange=function(e){a.props.handleSearchTerm(e.target.value)},a.helpWithSearch=function(e){e.preventDefault(),a.props.handleSearch()},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"searchBar"},r.a.createElement("h1",null,"Search for a Restaurant or your Favorite Foods"),r.a.createElement("form",{onSubmit:this.helpWithSearch},r.a.createElement("input",{type:"text",onChange:this.helpWithChange,value:this.props.searchTerm}),r.a.createElement("input",{type:"submit",value:"Submit"})))}}]),t}(n.Component),_=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={redirect:!1},a.handleNav=function(){a.props.cartIsEmpty||a.props.restaurant.name===a.props.selectRestName?(a.props.selectNewRest(a.props.restaurant.id,a.props.restaurant.name,a.props.restaurant.location.city,a.props.restaurant.categories[0].title,a.props.restaurant.phone,a.props.restaurant.location.address1,a.props.restaurant.image_url),a.setState({redirect:!0})):alert("Please place your order or empty your cart!")},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.restaurant;return r.a.createElement("div",{className:"card-container"},r.a.createElement("div",{className:"rest-img"},r.a.createElement("img",{src:e.image_url,alt:e.name})),r.a.createElement("div",{className:"top-card"},r.a.createElement("div",null,r.a.createElement("p",null,e.name)),r.a.createElement("div",null,r.a.createElement("p",null,e.categories[0].title," ")),r.a.createElement("div",null,r.a.createElement("p",null,e.price))),r.a.createElement("div",{className:"bottom-card"},r.a.createElement("div",null,r.a.createElement("p",null,e.location.address1)),r.a.createElement("div",null,r.a.createElement("p",null,"Rating: ",e.rating)),r.a.createElement("div",null,r.a.createElement("p",null,e.display_phone)),r.a.createElement("div",null,e.is_closed?r.a.createElement("h2",null,"HAHA WE CLOSED"):r.a.createElement("button",{onClick:this.handleNav},"Go to Restaurant"))),this.state.redirect?r.a.createElement(d.a,{push:!0,to:"/restaurant"}):r.a.createElement(r.a.Fragment,null))}}]),t}(r.a.Component),A=function(e){function t(){return Object(i.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.props.restaurants.map((function(t){return r.a.createElement(_,{key:t.id,restaurant:t,selectNewRest:e.props.selectNewRest,cartIsEmpty:e.props.cartIsEmpty,selectRestName:e.props.selectRestName})}));return r.a.createElement("div",{className:"container",id:"restaurant-container"},t)}}]),t}(r.a.Component),P=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={searchTerm:"",restaurants:[]},a.handleSearchTerm=function(e){a.setState({searchTerm:e})},a.handleSearch=function(){var e=a.state.searchTerm;fetch("https://fifteenminute-api.herokuapp.com/yelp_api_adapter/search?term=".concat(e)).then((function(e){return e.json()})).then((function(e){a.setState({restaurants:e})})),console.log(a.state)},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement(T,{searchTerm:this.state.searchTerm,handleSearchTerm:this.handleSearchTerm,handleSearch:this.handleSearch}),r.a.createElement(A,{restaurants:this.state.restaurants,selectNewRest:this.props.selectNewRest,cartIsEmpty:this.props.cartIsEmpty,selectRestName:this.props.selectRestName}))}}]),t}(r.a.Component),D=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={restaurant:"",food:[]},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("https://fifteenminute-api.herokuapp.com/confirm").then((function(e){return e.json()})).then((function(t){e.setState({restaurant:t.restaurant.name,food:t.food_items})}))}},{key:"render",value:function(){var e=this.state.food;return r.a.createElement("div",{className:"container"},r.a.createElement("h1",null,"Thank you ",localStorage.username,"!"),r.a.createElement("h2",null,"for your order of"),r.a.createElement("ul",null,e.map((function(e){return r.a.createElement("li",{className:"confirmation-food"},e.name)}))),r.a.createElement("h2",null,"from"),r.a.createElement("h1",null,this.state.restaurant))}}]),t}(n.Component),F=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={user:{username:"",id:0},token:"",selectRest:{id:"",name:"",location:"",category:"",phone_number:"",address:"",image_url:""},itemsInCart:[]},a.onDeleteItem=function(e){var t=a.state.itemsInCart.findIndex((function(t){return t.name===e})),n=a.state.itemsInCart.slice();n.splice(t,1),a.setState({itemsInCart:n})},a.handleResponse=function(e){e.user&&(localStorage.username=e.user.username,localStorage.token=e.token,a.setState(e,(function(){a.props.history.push("/profile")})))},a.handleCurrentUser=function(e){a.setState({username:e})},a.selectNewRest=function(e,t,n,r,s,c,l){a.setState({selectRest:{id:e,name:t,location:n,category:r,phone_number:s,address:c,image_url:l}})},a.addItemToCart=function(e){a.setState({itemsInCart:[].concat(Object(o.a)(a.state.itemsInCart),[e])})},a.clearCart=function(){a.setState({selectRest:{id:"",name:"",location:"",category:"",phone_number:"",address:"",image_url:""},itemsInCart:[]})},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){localStorage.token&&fetch("http://localhost:3000/persist",{headers:{Authorization:"Bearer ".concat(localStorage.token)}}).then((function(e){return e.json()})).then(this.handleResponse)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"App"},r.a.createElement(v,null),r.a.createElement("header",{className:"App-header"},r.a.createElement(d.d,null,r.a.createElement(d.b,{path:"/login",render:function(){return r.a.createElement(E,{handleCurrentUser:e.handleCurrentUser})}}),r.a.createElement(d.b,{path:"/register",render:function(){return r.a.createElement(f,{handleCurrentUser:e.handleCurrentUser})}}),r.a.createElement(d.b,{path:"/profile",render:function(){return r.a.createElement(I,{username:localStorage.username})}}),r.a.createElement(d.b,{path:"/cart",render:function(){return r.a.createElement(y,{onDeleteItem:e.onDeleteItem,itemsInCart:e.state.itemsInCart,selectRest:e.state.selectRest})}}),r.a.createElement(d.b,{path:"/checkout",render:function(){return r.a.createElement(S,{username:localStorage.username,itemsInCart:e.state.itemsInCart,selectRest:e.state.selectRest,clearCart:e.clearCart})}}),r.a.createElement(d.b,{path:"/search",render:function(){return r.a.createElement(P,{selectNewRest:e.selectNewRest,cartIsEmpty:0===e.state.itemsInCart.length,selectRestName:e.state.selectRest.name})}}),r.a.createElement(d.b,{path:"/restaurant",render:function(){return r.a.createElement(w,{selectRest:e.state.selectRest,addItemToCart:e.addItemToCart})}}),r.a.createElement(d.b,{path:"/confirmation",render:function(){var t;return r.a.createElement(D,(t={selectRest:e.state.selectRest},Object(l.a)(t,"selectRest",e.selectRest),Object(l.a)(t,"itemsInCart",e.itemsInCart),t))}}))))}}]),t}(r.a.Component),x=Object(d.g)(F);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(b.a,null,r.a.createElement(x,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[26,1,2]]]);
//# sourceMappingURL=main.0a928049.chunk.js.map